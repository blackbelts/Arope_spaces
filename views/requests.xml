<odoo>
    <data>
        <record model="ir.ui.view" id="crm__lead_form_view">
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_lead_view_form"/>
            <field name="arch" type="xml">

                <header>
                    <button string="Send To Insurer" name="send_mail_template_insurer" type="object"/>
<<<<<<< HEAD
                    <button  name="issued" attrs="{'invisible': ['|',('stage_id', '!=', 3),('opp_type', '!=', 1)]}" string="Policy Issued"  type="object" class="oe_highlight" groups="Arope_spaces.managers_group_arope"/>
=======
                    <button  name="issued" attrs="{'invisible': ['|',('stage_id', '!=', 3),('opp_type', '!=', 1)]}" string="Policy Issued"  type="object" class="oe_highlight" groups="Arope_spaces.managers_group"/>
                    <xpath expr="//field[@name='stage_id']" position="replace">
                        <field name="stage_id" widget="statusbar" options="{'clickable': '1', 'fold_field': 'fold'}" domain="[('type', 'in','opp_type')]" />

                    </xpath>
>>>>>>> 0aa873e8cd3256ac8a60ee5294670b5f8a6dc3a3
                </header>

<!--                <field name="user_id" position="attributes">-->
<!--                    <attribute name="context">{'filter_own_user': True}</attribute>-->
<!--                </field>-->
<!--                <field name="partner_id" position="attributes">-->
<!--                    <attribute name="context">{'own_customer_only':1}</attribute>-->
<!--                </field>-->

                <xpath expr="//field[@name='planned_revenue']/parent::div" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='probability']/parent::div" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//button[@name='action_set_won_rainbowman']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//button[@name='send_mail_template_insurer']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//button[@name='746']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//button[@name='action_schedule_meeting']" position="replace">
                    <button attrs="{'invisible': [('opp_type', '!=', 1)]}" class="oe_stat_button" type="object" icon="fa-dollar" string="Related Quick Quote" name="related_quote">
                    </button>
                    <button attrs="{'invisible': [('opp_type', 'not in', [3,4])]}" class="oe_stat_button" type="object" icon="fa-dollar" string="Related Policy" name="related_policy" groups="Arope_spaces.managers_group_arope,Arope_spaces.broker_space_group">
                    </button>
                    <button attrs="{'invisible': [('opp_type', 'not in', [1,3,4])]}" class="oe_stat_button" string="Survey Report" icon="fa-file" type="object" name="get_survey" groups="Arope_spaces.managers_group_arope,Arope_spaces.surveyor_group">
                    </button>

                </xpath>
<!--                <xpath expr="//field[@name='partner_id']/parent::div" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>>-->
<!--                </xpath>-->
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email_from']/parent::div" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email_from']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_address_phone']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//group" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='tag_ids']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
<!--                <xpath expr="//div/h1" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>-->
<!--                </xpath>-->
<!--                <xpath expr="//div/label[@for='name']" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>-->
<!--                </xpath>-->

                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//label[@for='name']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
<!--                <xpath expr="//field[@name='name']" position="after">-->
<!--                    <group>-->
<!--                            <field name="opp_type"/>-->
<!--                        </group>-->
<!--                </xpath>-->
                <xpath expr="//group" position="after">
                    <group>
                        <group>
                            <field name="opp_type"/>
                        </group>
                        <group>
                            <field name="name"/>
                        </group>

                    </group>
                    <group attrs="{'invisible': [('opp_type', '!=', 5)]}">
                        <group>
                            <field name="customer_name" />
                            <field name="pin" />
                            <field name="email" />
                        </group>
                    </group>
                    <group attrs="{'invisible': [('opp_type', '!=', 1)]}">
                        <group>
                            <field name="state" invisible="1"/>
                            <field name="lob"/>
                            <field name="product_id"/>
                            <field name="customer_name" />
                            <field name="phone" />
                            <field name="email" />
                        </group>

                        <group>

                            <field name="application_number" readonly="1" force_save="1"/>
                            <field name="application_date" />
                            <field name="policy_number" readonly="1" force_save="1" attrs="{'invisible': [('policy_number', '=', False)]}"/>
                            <field name="policy_issue_date" readonly="1" force_save="1" attrs="{'invisible': [('policy_issue_date', '=', False)]}"/>


                        </group>
                    </group>
                    <group attrs="{'invisible': [('opp_type', '!=', 2)]}">
                        <group>
                            <field name="name" readonly="1"/>
                            <label for="policy"/>
                            <div class="o_row">

                                <field name="policy" />
                                <strong>/</strong>
                                <field name="policy_seq" />
                            </div>
                            <field name="product" readonly="1"/>
                            <field name="customer" readonly="1"/>
                            <field name="start_date" readonly="1"/>

                            <field name="end_date" readonly="1"/>

                            <field name="policy_services_type" />
                            <field name="end_reason" attrs="{'invisible': [('policy_services_type', '!=', 'end')]}"/>
                            <field name="cancel_reason" attrs="{'invisible': [('policy_services_type', '!=', 'cancel')]}"/>

                        </group>
                    </group>
                    <group attrs="{'invisible': [('opp_type', 'not in', [3,4])]}">
                        <group>
                            <label for="policy"/>
                            <div class="o_row">

                                <field name="product" />
                                <strong>/</strong>
                                <field name="policy_num" />
                            </div>
<!--                            <field name="product"/>-->
<!--                            <field name="policy_num"/>-->
                        </group>
                        <group>
                            <field name="claim_number" readonly="1" force_save="1"/>
                            <field name="lob" readonly="1" force_save="1"/>
                            <field name="customer_name" readonly="1" force_save="1"/>
                            <field name="phone" readonly="1" force_save="1"/>
                            <field name="date" readonly="1" force_save="1"/>
                        </group>
                        <group attrs="{'invisible': [('opp_type', '!=', 4)]}">
                            <field name="chasse_num"/>
                            <field name="maintenance_centers_in_or_out"/>
                            <field name="maintenance_centers" attrs="{'invisible': [('maintenance_centers_in_or_out', '!=', 'in')]}"/>
                        </group>
                    </group>

                </xpath>
                <xpath expr="//label[@for='planned_revenue']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//div/h2" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//label[@for='probability']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//label[@for='email_from']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='description']/parent::page" position="attributes">
                    <attribute name="invisible">1</attribute>>
                </xpath>
                <xpath expr="//page[@name='lead']" position="attributes">
                    <attribute name="invisible">1</attribute>>
                </xpath>
                <notebook>
                    <page string="Required For Survey" attrs="{'invisible': ['|',('opp_type', '!=', 1),('state', '!=', 'survey')]}">
                        <group>
                            <group>
                                <field name="name_of_contact_person"/>
                            </group>
                            <group>
                                <field name="main_phone"/>
                            </group>
                            <group>
                                <field name="spare_phone"/>
                            </group>
                        </group>
                    </page>
                    <page string="Application Form And Required Documents" groups="Arope_spaces.managers_group_arope,Arope_spaces.broker_space_group" attrs="{'invisible': ['|',('opp_type', '!=', 1),
                    ('lob','in', [4, 7])]}">
                        <field name="persons" >
                            <tree editable="bottom">
                                <field name="insured" readonly="1" force_save="1"/>
                                <field name="download_files" widget="many2many_binary"/>
                                <field name="application_file" widget="many2many_binary"/>
                                <button name="required_document" string="Required Documents" type="object" class="oe_highlight"/>
                                <field name="comment"/>
                                <field name="issue_in_progress_state"/>
                            </tree>
                        </field>

                    </page>
                    <page string="Application Form" attrs="{'invisible': ['|',('opp_type', '!=', 1),
                    ('lob','not in', [4, 7])]}">
                        <field name="question_ids">
                            <tree editable="bottom">
                                <field name="question"/>
                                <field name="text"/>
                                <field name="file"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Offers" groups="Arope_spaces.managers_group_arope,Arope_spaces.broker_space_group" attrs="{'invisible': [('opp_type', '!=', 1)]}">
                        <field name="offer_ids" >
                            <tree editable="bottom" decoration-danger="offer_state == 'pending'">
                                <field name="type" />
                                <field name="date" />
                                <field name="file" widget="many2many_binary" />
                                <field name="offer_state"/>
                                <field name="comment"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Required Documents" attrs="{'invisible': [('opp_type', 'not in', [3,4])]}">
                        <field name="declaration_ids">
                            <tree editable="bottom" decoration-danger="state == 'pending'">
                                <field name="question"/>
                                <field name="download_files" widget="many2many_binary"/>
                                <field name="file" widget="many2many_binary"/>
                                <field name="state"/>
                                <field name="comment"/>
                            </tree>
                        </field>
                    </page>
                </notebook>
            </field>
        </record>
        <record model="ir.actions.act_window" id="ibs_crm_lead_opportunities">
            <field name="name">Requests</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('type','=','opportunity'),('opp_type','=', '2')]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid,
                'default_opp_type': 2
                }
            </field>
        </record>
        <record model="ir.actions.act_window" id="ibs_crm_lead_opportunities_insurance_app">
            <field name="name">Insurance App</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('type','=','opportunity'),('opp_type','=',1)]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid,
                'default_opp_type': 1
                }
            </field>
        </record>
        <record model="ir.actions.act_window" id="ibs_crm_lead_opportunities_motor_claim">
            <field name="name">Motor Claims</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('type','=','opportunity'),('opp_type','=',4)]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid,
                'default_opp_type': 4
                }
            </field>
        </record>
        <record model="ir.actions.act_window" id="ibs_crm_lead_opportunities_signup">
            <field name="name">Signup</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('type','=','opportunity'),('opp_type','=',5)]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid,
                'default_opp_type': 5
                }
            </field>
        </record>
        <record model="ir.actions.act_window" id="ibs_crm_lead_opportunities_complain">
            <field name="name">Complains</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('type','=','opportunity'),('opp_type','=',6)]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid,
                'default_opp_type': 6
                }
            </field>
        </record>
        <record model="ir.actions.act_window" id="ibs_crm_lead_opportunities_general_claim">
            <field name="name">General Claim</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="domain">[('type','=','opportunity'),('opp_type','=',3)]</field>
            <field name="context">{
                'default_type': 'opportunity',
                'default_user_id': uid,
                'default_opp_type': 3
                }
            </field>
        </record>
        <record model="ir.ui.view" id="crm_stage_form_view">
            <field name="model">crm.stage</field>
            <field name="inherit_id" ref="crm.crm_stage_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='is_won']" position="before">
                    <field name="type" widget="many2many_tags"/>
                </xpath>
                <xpath expr="//field[@name='fold']" position="after">
                    <field name="message" />
                </xpath>
            </field>
        </record>
        <record model="ir.actions.act_window" id="crm_lead_stages">
            <field name="name">Stages</field>
            <field name="res_model">crm.stage</field>
            <field name="view_mode">tree,form</field>
        </record>
        <record model="ir.ui.view" id="tree_request_type">
            <field name="name">Requests Type</field>
            <field name="model">request.type</field>
            <field name="arch" type="xml">
                <tree string="Requests Type" editable="bottom">
                    <field name="type"/>
                </tree>
            </field>
        </record>
        <record model="ir.actions.act_window" id="request_type_action">
            <field name="name">Request Type</field>
            <field name="res_model">request.type</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Request Type
                </p>
            </field>
        </record>
    </data>
</odoo>